name: anatine
version: edge
confinement: strict
summary: Pristine Twitter app
description: This app is based the awesome Mobile Twitter site, but modifies a lot of things and makes it more usable on the desktop.

apps:
  anatine:
    command: desktop-launch $SNAP/bin/Anatine
    plugs: [home, x11, unity7, gsettings, opengl, pulseaudio, network, network-bind, process-control, browser-support]

  debug:
    command: bash
    plugs: [home, x11, unity7, gsettings, opengl, pulseaudio, network, network-bind, process-control, browser-support]

parts:
  anatine:
    plugin: make
    after: [desktop-gtk2]
    source: .

    build-packages:
      - git
      - npm
      - nodejs-legacy

    stage-packages:
      - libxtst6
      - libxss1
      - indicator-appmenu
      - libappindicator1
      - libdbusmenu-gtk4
      - unity-gtk2-module
      - libnotify4
      - libgconf2-4
      - libnss3
      - overlay-scrollbar
      - libgail-common
      - libatk-adaptor
      - unity-gtk-module-common
      - libcanberra-gtk-module

    stage:
      - -usr/sbin/update-icon-caches

  snapd-xdg-open:
    plugin: dump
    source: https://github.com/ubuntu-core/snapd-xdg-open.git

    snap:
      - bin/xdg-open

    organize:
      data/xdg-open: bin/xdg-open
